<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>HD Foto Maker</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{ --neon:#00e5ff; }
*{box-sizing:border-box;font-family:Poppins,sans-serif}
body{
  margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;
  color:#eafcff;background:#000;overflow:hidden;
}
.bg{
  position:fixed;inset:0;z-index:-2;
  background-size:cover;background-position:center;
  filter: brightness(.6);
}
.overlay{position:fixed;inset:0;z-index:-1;background:linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.85));}
.app{
  width:95%;max-width:420px;padding:18px;border-radius:18px;
  background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.03));
  backdrop-filter: blur(12px);
  box-shadow:0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.08);
}
.header{text-align:center;margin-bottom:10px}
.header h1{margin:0;font-size:22px}
.header .by{font-size:12px;opacity:.75}
.card{margin-top:10px;padding:12px;border-radius:14px;background:rgba(255,255,255,.08);box-shadow: inset 0 0 0 1px rgba(255,255,255,.08);}
input,select,button{
  width:100%;padding:12px;border-radius:12px;border:none;outline:none;
  background:rgba(255,255,255,.12);color:#eafcff;margin:6px 0
}
button{cursor:pointer;font-weight:700;color:#001015;background:linear-gradient(135deg, var(--neon), #00ffa6);box-shadow:0 8px 18px rgba(0,229,255,.35);}
.preview{display:none;margin-top:10px;text-align:center}
.preview img{max-width:100%;border-radius:12px;cursor:pointer;box-shadow:0 0 16px rgba(0,229,255,.35)}
.actions{display:none;gap:8px;margin-top:8px}
.actions button{flex:1}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.92);display:none;align-items:center;justify-content:center;z-index:99}
.modal img{max-width:95%;max-height:95%;border-radius:12px}
.modal .close{position:absolute;top:16px;right:16px;font-size:28px;cursor:pointer}
</style>
</head>
<body>

<div class="bg" id="bg"></div>
<div class="overlay"></div>

<div class="app">
  <div class="header">
    <h1>HD Foto Maker</h1>
    <div class="by">Made in Relra</div>
  </div>

  <div class="card">
    <input id="upload" type="file" accept="image/*">
    <select id="res">
      <option value="720">720p</option>
      <option value="1080">1080p</option>
      <option value="1440">2K</option>
      <option value="2160">4K</option>
    </select>
    <select id="enhance">
      <option value="0">Normal</option>
      <option value="1">Jernihin</option>
    </select>
    <button id="process">Proses HD</button>

    <div class="preview" id="preview"></div>
    <div class="actions" id="actions">
      <button id="download">Download</button>
      <button id="reset">Reset</button>
    </div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="close" id="close">âœ•</div>
  <img id="modalImg" />
</div>

<script>
const WALLPAPER_URL = "https://i.imgur.com/sIIj3Na.jpeg"; // ganti pake direct link Imgur lu
document.getElementById("bg").style.backgroundImage = `url('${WALLPAPER_URL}')`;

const upload = document.getElementById('upload');
const resSelect = document.getElementById('res');
const enhanceSelect = document.getElementById('enhance');
const preview = document.getElementById('preview');
const actions = document.getElementById('actions');
const processBtn = document.getElementById('process');
const downloadBtn = document.getElementById('download');
const resetBtn = document.getElementById('reset');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modalImg');
const closeModal = document.getElementById('close');

let originalImg = new Image();
let resultDataURL = null;

upload.addEventListener('change', e => {
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = ev => {
    originalImg = new Image();
    originalImg.onload = () => {
      preview.style.display = 'block';
      preview.innerHTML = `<img src="${ev.target.result}">`;
      actions.style.display = 'none';
    };
    originalImg.src = ev.target.result;
  };
  reader.readAsDataURL(file);
});

processBtn.onclick = () => {
  if(!originalImg.src) return alert("Upload foto dulu bro!");
  const targetH = parseInt(resSelect.value);
  const ratio = originalImg.width / originalImg.height;
  const newH = targetH;
  const newW = Math.round(newH * ratio);

  const canvas = document.createElement('canvas');
  canvas.width = newW; canvas.height = newH;
  const ctx = canvas.getContext('2d');
  ctx.drawImage(originalImg, 0, 0, newW, newH);

  if(enhanceSelect.value === "1"){
    const imgData = ctx.getImageData(0,0,newW,newH);
    const d = imgData.data;
    for(let i=0;i<d.length;i+=4){
      d[i] = Math.min(255, d[i]*1.05);
      d[i+1] = Math.min(255, d[i+1]*1.05);
      d[i+2] = Math.min(255, d[i+2]*1.05);
    }
    ctx.putImageData(imgData,0,0);
  }

  resultDataURL = canvas.toDataURL("image/jpeg", 0.95);
  preview.innerHTML = `<img id="resultImg" src="${resultDataURL}" title="Klik buat lihat full">`;
  actions.style.display = 'flex';

  document.getElementById('resultImg').onclick = () => {
    modal.style.display = 'flex';
    modalImg.src = resultDataURL;
  };
};

downloadBtn.onclick = () => {
  const a = document.createElement('a');
  a.href = resultDataURL;
  a.download = "HD-Relra.jpg";
  a.click();
};

resetBtn.onclick = () => {
  upload.value = "";
  preview.style.display = 'none';
  preview.innerHTML = "";
  actions.style.display = "none";
  originalImg = new Image();
  resultDataURL = null;
};

closeModal.onclick = () => modal.style.display = 'none';
modal.onclick = (e) => { if(e.target === modal) modal.style.display = 'none'; };
</script>
</body>
</html>
